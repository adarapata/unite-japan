Unity-WEBGL
The Future of Web Deployment in Unity
現状のWEBゲーム
UberStrikeの例
Unity WebPlayerを使用

UnityWebPlayer is 何
UnityをWebで扱うプラグイン
インストールしてもらう必要がある

Qihoo360ブラウザには最初から入っている(中国)
Facebookにも入っている
347 Millionインストール
比率はアジアが42%

今後のWEBについて
どんどん進化している
前までプラグインのみが進化している状況だった
だが、HTML5が台頭してきた。
ブラウザ自身でハンドリングできるようになってくる
寧ろプラグインによるセキュリティの問題等
GoogleはNPAPIプラグインを打ち切る
じゃあUnityはどうすル？プラグイン入れてもらう？

今からWebGLのお話
ブラウザが提供する3Dレンダリングライブラリ
OpenGL ES2.0をベースにしたAPI
Open web standard
firefox chrome operaに入ってる。実はsafariにも入ってるけどデフォルトでオフになってる

Unity的には？
完璧
プラグインからの解放

でもUnityで対応できるの？
-> ハックウィークでがんばる

ハックウィーク
一切の作業をやめて、面白い物をつくるというルールのもと開発を行う。Unityの各国にちらばったエンジニアをコペンハーゲンに集める。
最初は超絶苦労したけど、なんどもハックウィークを重ねて、ようやく可能性を見たので、業務として始めた

デモ：

技術の話
どうやったの？
- ビルドするだけだから、表は基本は変わらない
- Unityで書いたコードがすべてjsに変換される
- UnityのランタイムコードはC++、ユーザが書くのはC#など。どうする？
- emscripten:C++のコードをjavascriptに吐き出すツール。これを使う。
- asm,jsを作る
asm,jsとは？
- jsは動的に動くためコンパイラが型を推測しにくい
- asm.jsはjsのサブセット
- FireFoxのみ有効

ユーザコードをどうコンパイルするか？
IL2CPPの存在
- クロスコンパイラ
- .netコードをC++に変換する

例
C# -> .netバイトコード -> C++ -> asm.js -> Unity側で最適化

Unity5.0でどうなる？
- ビルドターゲットに追加
- Googleおよびflashは死んだ
- webgl is early-accessバージョン
- まだFireFoxのデスクトップバージョンのみ、一応ほかのいける

やれないこと
- ビデオ
- カメラ
- デバグ
- スレッド
- ネットワーク(WWWはイケル)

どのくらいの速度なの？
- ケースバイケース
- ブラウザ依存
- SIMDとマルチスレッドは厳しい
- メッシュスキニングはつらい
- 酷いときは50%落ちる
- でもflashと比較したらまだまだ早いっすよ

プロファイラ使えるよ
プラグインも対応するよ！
コードからjsのライブラリをコールすることもできる
Application.ExternalCall メソッドで外部javascript呼べる

これから
5;xはどれを押し進めるのか
- WEBGLを完全対応する
- 他ブラウザへの対応

WebPlayer自体は、まだまだサポートします。
ただ、いずれ消えますWebPlayer
5.x系では確実にサポートされてる

SIMDおよびマルチスレッディングにしては各社話し合いが行われている。

Q. 待ってた！WEBブラウザのモバイル対応の計画はありますか？
A. いつやるかは明言できない。ただいずれは

Q. early-accessは有料であると言ったが、フル版のときの価格は？
A. 決めてない

Q. ゲームパッドAPIっていうHTML5のプラグインあるんだけど。Unityはいける？
A. ChromeとFirefoxはいけるけど、現時点での他はわからない。Unity単体だといけます
